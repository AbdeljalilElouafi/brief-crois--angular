<div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-300 flex flex-col h-full">
    <div class="flex-1">
        <div class="flex justify-between items-start">
            <div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">{{ job.title }}</h3>
                <p class="text-indigo-600 font-medium mb-4">{{ job.company }}</p>
            </div>
            <span
                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                {{ job.source }}
            </span>
        </div>

        <div class="space-y-2 mb-4">
            <div class="flex items-center text-gray-500 text-sm">
                <svg class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M17.657 16.657L13 21.314l-4.657-4.657a8 8 0 0111.314 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                {{ job.location }}
            </div>
            <div class="flex items-center text-gray-500 text-sm">
                <svg class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                Posted on {{ job.date | date }}
            </div>
        </div>

        <p class="text-gray-600 text-sm line-clamp-3 mb-4" [innerHTML]="job.description"></p>
    </div>

    <div class="mt-4 pt-4 border-t border-gray-100 flex flex-col gap-2">
        <a [href]="job.url" target="_blank"
            class="w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none">
            View Offer
        </a>

        <div class="flex gap-2" *ngIf="isAuthenticated">
            <button (click)="toggleFavorite()"
                class="flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"
                [ngClass]="{'text-red-600': (isFavorite$ | async)}">
                <svg class="h-4 w-4 mr-2" [attr.fill]="(isFavorite$ | async) ? 'currentColor' : 'none'"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                </svg>
                {{ (isFavorite$ | async) ? 'Saved' : 'Favorite' }}
            </button>
            <button *ngIf="!(isApplied$ | async)" (click)="apply()"
                class="flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none">
                <svg class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Apply
            </button>
            <button *ngIf="(isApplied$ | async)" disabled
                class="flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 focus:outline-none cursor-default">
                <svg class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
                Applied
            </button>
        </div>
    </div>
</div>